{"version":3,"sources":["read.js"],"names":["define","Deferred","diskfs","read","readFile","file","params","d","reader","FileReader","onload","evt","resolve","target","result","onerror","e","code","error","alert","asArrayBuffer","readAsArrayBuffer","asDataUrl","readAsDataURL","asText","readAsText","promise"],"mappings":";;;;;;;AAAAA,OAAO,CACH,+BACA,YACF,SAASC,EAAUC,GAgCjB,OAAOA,EAAOC,KAAOD,EAAOE,SA9B5B,SAAkBC,EAAMC,GACpBA,EAASA,GAAU,GACnB,IAAIC,EAAI,IAAIN,EACRO,EAAS,IAAIC,WAwBjB,OAtBAD,EAAOE,OAAS,SAASC,GACrBJ,EAAEK,QAAQD,EAAIE,OAAOC,MAAM,CAC/B,EACAN,EAAOO,QAAU,SAASC,GAClBC,EAAOD,EAAEH,OAAOK,MAAMD,KACb,IAATA,EACAE,MAAM,qDAAsD,EAE5DA,MAAM,eAAiBF,CAAI,CAEnC,EAEIX,EAAOc,cACPZ,EAAOa,kBAAkBhB,CAAI,EACtBC,EAAOgB,UACdd,EAAOe,cAAclB,CAAI,EAClBC,EAAOkB,OACdhB,EAAOiB,WAAWpB,CAAI,EAEtBG,EAAOa,kBAAkBhB,CAAI,EAG1BE,EAAEmB,OACb,CAIJ,CAAC","file":"../read.js","sourcesContent":["define([\r\n    \"skylark-langx-async/deferred\",\r\n    \"./diskfs\"\r\n],function(Deferred, diskfs){\r\n\r\n    function readFile(file, params) {\r\n        params = params || {};\r\n        var d = new Deferred,\r\n            reader = new FileReader();\r\n\r\n        reader.onload = function(evt) {\r\n            d.resolve(evt.target.result);\r\n        };\r\n        reader.onerror = function(e) {\r\n            var code = e.target.error.code;\r\n            if (code === 2) {\r\n                alert('please don\\'t open this page using protocol fill:///');\r\n            } else {\r\n                alert('error code: ' + code);\r\n            }\r\n        };\r\n\r\n        if (params.asArrayBuffer) {\r\n            reader.readAsArrayBuffer(file);\r\n        } else if (params.asDataUrl) {\r\n            reader.readAsDataURL(file);\r\n        } else if (params.asText) {\r\n            reader.readAsText(file);\r\n        } else {\r\n            reader.readAsArrayBuffer(file);\r\n        }\r\n\r\n        return d.promise;\r\n    }\r\n\r\n    return diskfs.read = diskfs.readFile = readFile;\r\n    \r\n});\r\n"]}