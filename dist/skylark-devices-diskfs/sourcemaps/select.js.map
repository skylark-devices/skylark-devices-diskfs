{"version":3,"sources":["select.js"],"names":["define","diskfs","fileInput","select","params","directory","multiple","accept","title","fileSelected","picked","selectFiles","pickedFiles","i","length","size","splice","input","document","createElement","type","style","position","left","top","opacity","body","appendChild","onchange","e","entries","target","webkitEntries","webentry","all","then","files","Array","prototype","slice","call","value","webkitdirectory","click"],"mappings":";;;;;;;AAAAA,OAAO,CACH,YACF,SAASC,GACP,IAAIC,EAwDJ,OAAOD,EAAOE,OAnDd,SAAgBC,GAEZ,IAAIC,GADJD,EAASA,GAAU,IACIC,WAAa,CAAA,EAChCC,EAAWF,EAAOE,UAAY,CAAA,EAC9BC,EAASH,EAAOG,QAAU,GAC1BC,EAAQJ,EAAOI,OAAS,GACxBC,EAAeL,EAAOM,OAa1B,SAASC,EAAYC,GACjB,IAAK,IAAIC,EAAID,EAAYE,OAAQD,CAAC,IAC1BD,EAAYC,GAAGE,KAvBb,EAAA,GAwBFH,EAAYI,OAAOH,EAAG,CAAC,EAG/BJ,EAAaG,CAAW,CAC5B,CAnBKV,KACGe,EAAQf,EAAYgB,SAASC,cAAc,OAAO,GAEhDC,KAAO,OACbH,EAAMI,MAAMC,SAAW,QACvBL,EAAMI,MAAME,KAAO,EACnBN,EAAMI,MAAMG,IAAM,EAClBP,EAAMI,MAAMI,QAAU,KACtBP,SAASQ,KAAKC,YAAYV,CAAK,GAanCf,EAAU0B,SAAW,SAASC,GAC1B,IAAIC,EAAUD,EAAEE,OAAOC,eAAiBH,EAAEE,OAAOD,QAE7CA,GAAWA,EAAQhB,OACnBmB,SAASC,IAAIJ,CAAO,EAAEK,KAAK,SAASC,GAChCzB,EAAYyB,CAAK,CACrB,CAAC,EAEDzB,EAAY0B,MAAMC,UAAUC,MAAMC,KAAKX,EAAEE,OAAOK,KAAK,CAAC,EAG1DlC,EAAUuC,MAAQ,GAClBvC,EAAU0B,SAAW,IACzB,EAEA1B,EAAUI,SAAWA,EACrBJ,EAAUK,OAASA,EACnBL,EAAUM,MAAQA,EAElBN,EAAUwC,gBAAkBrC,EAC5BH,EAAUyC,MAAM,CACpB,CAGJ,CAAC","file":"../select.js","sourcesContent":["define([\r\n    \"./diskfs\"\r\n],function(diskfs){\r\n    var fileInput,\r\n        fileInputForm,\r\n        fileSelected,\r\n        maxFileSize = 1 / 0;\r\n\r\n    function select(params) {\r\n        params = params || {};\r\n        var directory = params.directory || false,\r\n            multiple = params.multiple || false,\r\n            accept = params.accept || \"\", //'image/gif,image/jpeg,image/jpg,image/png,image/svg'\r\n            title = params.title || \"\",\r\n            fileSelected = params.picked;\r\n        if (!fileInput) {\r\n            var input = fileInput = document.createElement(\"input\");\r\n\r\n            input.type = \"file\";\r\n            input.style.position = \"fixed\";\r\n            input.style.left = 0;\r\n            input.style.top = 0;\r\n            input.style.opacity = .001;\r\n            document.body.appendChild(input);\r\n\r\n        }\r\n\r\n        function selectFiles(pickedFiles) {\r\n            for (var i = pickedFiles.length; i--;) {\r\n                if (pickedFiles[i].size > maxFileSize) {\r\n                    pickedFiles.splice(i, 1);\r\n                }\r\n            }\r\n            fileSelected(pickedFiles);\r\n        }\r\n\r\n        fileInput.onchange = function(e) {\r\n            var entries = e.target.webkitEntries || e.target.entries;\r\n\r\n            if (entries && entries.length) {\r\n                webentry.all(entries).then(function(files) {\r\n                    selectFiles(files);\r\n                });\r\n            } else {\r\n                selectFiles(Array.prototype.slice.call(e.target.files));\r\n            }\r\n            // reset to \"\", so selecting the same file next time still trigger the change handler\r\n            fileInput.value = \"\";     \r\n            fileInput.onchange = null;\r\n        };\r\n        \r\n        fileInput.multiple = multiple;\r\n        fileInput.accept = accept;\r\n        fileInput.title = title;\r\n\r\n        fileInput.webkitdirectory = directory;\r\n        fileInput.click();\r\n    }\r\n\r\n    return diskfs.select = select;\r\n});\r\n\r\n"]}