{"version":3,"sources":["read.js"],"names":["define","Deferred","filer","readFile","file","params","d","reader","FileReader","onload","evt","resolve","target","result","onerror","e","code","error","alert","asArrayBuffer","readAsArrayBuffer","asDataUrl","readAsDataURL","asText","readAsText","promise","read"],"mappings":";;;;;;;AAAAA,QACI,yBACA,WACF,SAASC,EAAUC,GAEjB,QAASC,GAASC,EAAMC,GACpBA,EAASA,KACT,IAAIC,GAAI,GAAIL,GACRM,EAAS,GAAIC,WAwBjB,OAtBAD,GAAOE,OAAS,SAASC,GACrBJ,EAAEK,QAAQD,EAAIE,OAAOC,SAEzBN,EAAOO,QAAU,SAASC,GACtB,GAAIC,GAAOD,EAAEH,OAAOK,MAAMD,IACb,KAATA,EACAE,MAAM,uDAENA,MAAM,eAAiBF,IAI3BX,EAAOc,cACPZ,EAAOa,kBAAkBhB,GAClBC,EAAOgB,UACdd,EAAOe,cAAclB,GACdC,EAAOkB,OACdhB,EAAOiB,WAAWpB,GAElBG,EAAOa,kBAAkBhB,GAGtBE,EAAEmB,QAGb,MAAOvB,GAAMwB,KAAOxB,EAAMC,SAAWA","file":"../read.js","sourcesContent":["define([\r\n    \"skylark-langx/Deferred\",\r\n    \"./filer\"\r\n],function(Deferred, filer){\r\n\r\n    function readFile(file, params) {\r\n        params = params || {};\r\n        var d = new Deferred,\r\n            reader = new FileReader();\r\n\r\n        reader.onload = function(evt) {\r\n            d.resolve(evt.target.result);\r\n        };\r\n        reader.onerror = function(e) {\r\n            var code = e.target.error.code;\r\n            if (code === 2) {\r\n                alert('please don\\'t open this page using protocol fill:///');\r\n            } else {\r\n                alert('error code: ' + code);\r\n            }\r\n        };\r\n\r\n        if (params.asArrayBuffer) {\r\n            reader.readAsArrayBuffer(file);\r\n        } else if (params.asDataUrl) {\r\n            reader.readAsDataURL(file);\r\n        } else if (params.asText) {\r\n            reader.readAsText(file);\r\n        } else {\r\n            reader.readAsArrayBuffer(file);\r\n        }\r\n\r\n        return d.promise;\r\n    }\r\n\r\n    return filer.read = filer.readFile = readFile;\r\n    \r\n});\r\n"]}