{"version":3,"sources":["select.js"],"names":["define","filer","select","params","selectFiles","pickedFiles","i","length","size","maxFileSize","splice","fileSelected","directory","multiple","picked","fileInput","input","document","createElement","type","style","position","nput","left","top","opacity","body","appendChild","onchange","e","entries","target","webkitEntries","webentry","all","then","files","Array","prototype","slice","call","value","webkitdirectory","click"],"mappings":";;;;;;;AAAAA,QACI,WACF,SAASC,GAMP,QAASC,GAAOC,GAQR,QAASC,GAAYC,GACjB,IAAK,GAAIC,GAAID,EAAYE,OAAQD,KACzBD,EAAYC,GAAGE,KAAOC,GACtBJ,EAAYK,OAAOJ,EAAG,EAG9BK,GAAaN,GAbrBF,EAASA,KACT,IAAIS,GAAYT,EAAOS,YAAa,EAChCC,EAAWV,EAAOU,WAAY,EAC9BF,EAAeR,EAAOW,MAC1B,KAAKC,EAAW,CACZ,GAAIC,GAAQD,EAAYE,SAASC,cAAc,QAW/CF,GAAMG,KAAO,OACbH,EAAMI,MAAMC,SAAW,QACvBC,KAAKF,MAAMG,KAAO,EAClBP,EAAMI,MAAMI,IAAM,EAClBR,EAAMI,MAAMK,QAAU,KACtBR,SAASS,KAAKC,YAAYX,GAE1BA,EAAMY,SAAW,SAASC,GACtB,GAAIC,GAAUD,EAAEE,OAAOC,eAAiBH,EAAEE,OAAOD,OAE7CA,IAAWA,EAAQvB,OACnB0B,SAASC,IAAIJ,GAASK,KAAK,SAASC,GAChChC,EAAYgC,KAGhBhC,EAAYiC,MAAMC,UAAUC,MAAMC,KAAKX,EAAEE,OAAOK,QAGpDpB,EAAMyB,MAAQ,IAGtB1B,EAAUF,SAAWA,EACrBE,EAAU2B,gBAAkB9B,EAC5BG,EAAU4B,QA7Cd,GAAI5B,GAGAN,EAAc,EAAI,CA6CtB,OAAOR,GAAMC,OAASA","file":"../select.js","sourcesContent":["define([\r\n    \"./filer\"\r\n],function(filer){\r\n    var fileInput,\r\n        fileInputForm,\r\n        fileSelected,\r\n        maxFileSize = 1 / 0;\r\n\r\n    function select(params) {\r\n        params = params || {};\r\n        var directory = params.directory || false,\r\n            multiple = params.multiple || false,\r\n            fileSelected = params.picked;\r\n        if (!fileInput) {\r\n            var input = fileInput = document.createElement(\"input\");\r\n\r\n            function selectFiles(pickedFiles) {\r\n                for (var i = pickedFiles.length; i--;) {\r\n                    if (pickedFiles[i].size > maxFileSize) {\r\n                        pickedFiles.splice(i, 1);\r\n                    }\r\n                }\r\n                fileSelected(pickedFiles);\r\n            }\r\n\r\n            input.type = \"file\";\r\n            input.style.position = \"fixed\";\r\n            nput.style.left = 0;\r\n            input.style.top = 0;\r\n            input.style.opacity = .001;\r\n            document.body.appendChild(input);\r\n\r\n            input.onchange = function(e) {\r\n                var entries = e.target.webkitEntries || e.target.entries;\r\n\r\n                if (entries && entries.length) {\r\n                    webentry.all(entries).then(function(files) {\r\n                        selectFiles(files);\r\n                    });\r\n                } else {\r\n                    selectFiles(Array.prototype.slice.call(e.target.files));\r\n                }\r\n                // reset to \"\", so selecting the same file next time still trigger the change handler\r\n                input.value = \"\";\r\n            };\r\n        }\r\n        fileInput.multiple = multiple;\r\n        fileInput.webkitdirectory = directory;\r\n        fileInput.click();\r\n    }\r\n\r\n    return filer.select = select;\r\n});\r\n\r\n"]}